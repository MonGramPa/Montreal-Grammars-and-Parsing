---
layout: chapter
title: Notes on Harkema (2001:ยง3.2)
description: Multiple Context-Free Grammars
---

# Multiple Context-Free Grammars

#### Harkema, Hendrik (2001). "Parsing Minimalist Languages". PhD thesis. University of California, Los Angeles.

#### Notes by Chris Bruno, May 26, 2017

- Three formalisms:
    1. Minimalist Grammars (MGs)
    2. Generalized Context-Free Grammars (GCFG)
    3. $$m$$-Multiple Context-Free Grammars (MCFG)

<!-- TODO -->
- **Hierarchy.**

# Generalized Context-Free Grammars

**Definition.** A Generalized Context-Free Grammar is a quintuple $$G = (N, O, F, R, S)$$ for which the following five conditions hold:

1. $$N$$ is a set of non-terminals.
2. $$O$$ is a set of finite strings over a set of terminals $$\Sigma$$ which is disjoint with $$N$$ ($$O \subseteq \bigcup_{n \in \mathbb{N}^+}(\Sigma^*)^n$$).
3. $$F$$ is a set of partial functions from finite products of $$O$$ to $$O$$ ($$F \subseteq \bigcup_{n \in \mathbb{N}}F_n$$, where $$F_n$$ is the set of partial functions from $$O^n$$ to $$O$$.
4. $$R$$ is a set of rewriting rules ($$R \subseteq \bigcup_{n \in \mathbb{N}}((F_n \cap F) \times N^{n+1})$$).
5. $$S \in N$$ is the distinguished start symbol.

(where $$N, O, F, R, \Sigma$$ are finite and non-empty)

**Notation.** A rule $$r = (g, A, B_1, \ldots, B_n) \in (F_n \cap F) \times N^{n+1}$$ is written $$A \to g[B_1, \ldots, B_n]$$ if $$n > 0$$; and $$A \to g$$ if $$n = 0$$.

**Terminology.** If $$n > 0$$ then $$r$$ is called a *non-terminating rule*. If $$n = 0$$ then $$r$$ is called a *terminating rule*.

**Definitions.** Defining the language generated by a GCFG.

1. The *language derivable from $$A$$ in $$G$$* is $$L_G(A) = \bigcup_{k \in \mathbb{N}}L_G^k(A)$$ where $$L_G^k(A) \subseteq O$$ (the language derivable from $$A$$ in $$k$$ steps) is defined recursively:
    1. If $$R$$ contains a terminating rule $$A \to g$$ then $$g \in L_G^0(A)$$.
    2. If $$\theta \in L_G^k(A)$$ then $$\theta \in L_G^{k+1}(A)$$.
    3. If $$R$$ contains a non-terminating rule $$A \to g[B_1, \ldots, B_n]$$ and $$\theta_i \in L_G^k(B_i), 1 \leq i \leq n$$ and $$g(\theta_1, \ldots, \theta_n)$$ is defined, then $$g(\theta_i, \ldots, \theta_n) \in L_G^{k+1}(A)$$.
2. The *language generated by $$G$$* is $$L(G) = L_G(S)$$.

# $$m$$-Multiple Context-Free Grammars

**Definition.** For any $$m \in \mathbb{N^+}$$, an $$m$$-Multiple Context-Free Grammar is a Generalized Context-Free Grammar $$G = (N, O, F, R, S)$$ which satisfies these conditions:

1. The dimension of the tuples in $$O$$ is bounded by $$m$$: $$O = \bigcup_{i=1}^m(\Sigma^*)^+$$.
2. If $$g \in F$$, let $$n(g) \in \mathbb{N}$$ be the number of arguments of $$g$$. For any $$g \in F$$, these three conditions hold:
    1. The dimension of the result of $$g$$ and the dimensions of the arguments of $$g$$ are fixed: there exist natural numbers $$r(g), d_i(g), 1 \leq i \leq n(g)$$ such that $$g: (\Sigma^*)^{d_i(g)} \times \cdots \times (\Sigma^*)^{d_{n(g)}(g)} \to (\Sigma^*)^{r(g)}$$.
    2. The output of $$g$$ has a fixed effect. Let $$X = \{x_{ij} | 1 \leq i \leq n(g), 1 \leq j \leq d_i(g)\}$$ be a set of pairwise distinct variables, and let $$x_i = (x_{i1}, \ldots, x_{id_i(g)})$$. Then $$g(x_1, \ldots x_{n(g)}) = (\theta_1, \ldots, \theta_{r(g)})$$ where each $$\theta_h$$ is of the form
        $$\theta_h = \alpha_{h0}z_{h1}\alpha_{h1} \ldots z_{hl_h(g)}\alpha_{hl_h(g)}$$
        where $$\alpha_{hl} \in \Sigma^*, z_{hl} \in X; 1 \leq l \leq l_h(g)$$ for some fixed $$l_h(g) \in \mathbb{N}$$.
    3. (*anti-copying condition*) If $$g(x_1, \ldots x_{n(g)}) = (\theta_1, \ldots, \theta_{r(g)})$$ then each the representation of each $$\theta_h$$ has no duplicate variables: for each pair $$(i, j)$$, there is at most one $$h$$ and at most one $$l$$ such that $$z_{hl}$$ in the representation of $$\theta_h$$ is the variable $$x_{ij} \in X$$.
3. The dimension of any non-terminal symbol $$A \in N$$ is fixed with respect to $$r$$ and $$d_i$$: there is a natural number $$d(A)$$ such that for any rule $$A \to g[B_1, \ldots, B_{n(g)}], r(g) = d(A), d_i(g) = d(B_i)$$.
4. $$d(S) = 1$$.

**Summary.** Importantly, the definition of MCFGs defines these natural numbers as bounds:

1. $$m$$: the maximum size of any tuple in $$O$$. 2. $$n(g)$$: the amount of arguments for each $$g \in F$$.
3. $$d_i(g)$$: the size of each argument $$i, 1 \leq i \leq n(g)$$ of each $$g \in F$$. Recall that each argument of $$g$$ is a tuple drawn from $$O$$.
4. $$r(g)$$: the size of the output of $$g(\theta)$$ for each $$g \in F$$. Recall that the output of $$g$$ is a tuple drawn from $$O$$.
5. $$l_h(g)$$: the amount of variable-string pairs in the output of $$g(\theta)$$ for each $$g \in F$$.
6. $$d(A)$$: the dimension of each $$A \in N$$.

**Example.** A 2-Multiple Context-Free Grammar. $$G = (\{H, S\}, \bigcup_{i=1}^2(\{1, 2, 3, 4\}^*)^i, \{g, f\}, \{H \to (\epsilon, \epsilon), H \to g[H], S \to f[H]\}, S)$$ where $$g[(x_{11}, x_{12})] = (1x_{11}2, 3x_{12}4)$$ and $$f[(x_{11}, x_{12})] = (x_{11}, x_{12})$$ generates the language $$\{1^n2^n3^n4^n : n \geq 0\}$$.

# Equivalence with Minimalist Grammars

Sections 3.3 to 3.6 prove that MCFG $$\subseteq_{weak}$$ MG. Together with Michaelis' (1998) proof that MG $$\subseteq_{weak}$$ MCFG, this proves that they are weakly equivalent.

**Outline of Proof.**

1. Given an MCFG $$G$$, construct a MG $$G'$$ (ยง3.3)
2. Show that $$L(G) = L(G')$$. Harkema does this by:
    1. Defining the notion *non-terminal tree* (def 5) and then defining the notion of *correspondence* from a non-terminal tree $$\tau \in CL(G')$$ to a pair $$(A, p) \in N \times O$$ where $$p = (p_1, \ldots, p_{d(A)}) \in L_G(A)$$ (def 6).
    2. Proving 8 properties of MGs (ยง3.6.1: thms 1-8)
    3. Using these properties to prove these two propositions: (ยง3.6.2)
        1. **Proposition 1.** For every $$(A, p) \in N \times O$$, if $$p \in L_G(A)$$ then there is a $$\tau \in CL(G')$$ where $$\tau$$ corresponds to $$(A,p)$$.
        2. **Proposition 2.** For every $$\tau \in CL(G')$$, if $$\tau$$ is a non-terminal tree then there is an $$(A, p) \in N \times O$$ where $$p \in L_G(A)4$$ and $$\tau$$ corresponds to $$(A, p)$$.
    4. Using propositions 1 and 2 to prove that $$L(G) = L(G')$$
